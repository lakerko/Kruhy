<!DOCTYPE html>
<html>
<head>
    <title>A predsa sa toci</title>
</head>
<body>
    <script>
        var canvas = document.createElement("canvas");
        var ctx = canvas.getContext("2d");
        canvas.width = 400;
        canvas.height = 400;
        document.body.appendChild(canvas);

        var kruh = {
            x : 0,
            y : 0,
            size : 50,
            speed : 0,
            direction: 0,

            reset: function() {
                this.x = 1 + this.size / 2;
                this.y = canvas.height - this.size / 2;
                this.speed = 8;
                this.direction = 1;
            },

            move : function (delta) {
                if (this.x - this.size / 2 <= 0){
                    this.x = 1 + this.size / 2;
                    this.direction *= -1;
                    this.speed--;
                    console.log(this.speed);
                } else if (this.x + this.size / 2 >= canvas.width) {
                    this.x = canvas.width - this.size / 2;
                    this.direction *= -1;
                    this.speed--;
                    console.log(this.speed);
                }
                this.x += (this.speed * this.direction) * (delta / 20);
            },

            render : function() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size / 2, 0, 2*Math.PI);
                ctx.fillStyle = "green";
                ctx.fill();
                ctx.strokeStyle="#FF0000";
                ctx.stroke();
            }
        }

        function reset () {
            kruh.reset();
        }

        function update(delta) {
            kruh.move(delta);
        }

        function render() {
            ctx.fillStyle = "C9EDF5";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            kruh.render();
        }

        function main() {
            var now = Date.now();
            var delta = now - then;

            update(delta);
            render();

            then = now;
        }

        reset();
        var then = Date.now();
        setInterval(main, 1000 / 60);
    </script>
</body>
</htmL>